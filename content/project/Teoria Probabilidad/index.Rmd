---
# Documentation: https://sourcethemes.com/academic/docs/managing-content/
output: hugodown::md_document
code_folding: hide
title: "Teoria de Probabilidad"
summary: ""
authors: [admin]
tags: [Data Science, Teoria de Probabilidad, R, Estad√≠stica]
categories: []
date: 2021-10-05
draft: false

# Optional external URL for project (replaces project detail page).
external_link: ""

# Featured image
# To use, add an image named `featured.jpg/png` to your page's folder.
# Focal points: Smart, Center, TopLeft, Top, TopRight, Left, Right, BottomLeft, Bottom, BottomRight.
image:
  caption: "Photo by [www.cuemath.com](https://www.cuemath.com)"
  focal_point: "Smart"
  preview_only: false
  placement: 1

# Custom links (optional).
#   Uncomment and edit lines below to show custom links.
links:
- icon: linkedin
  icon_pack: fab
  name: Follow
  url: https://www.linkedin.com/in/morialva27/

url_code: ""
url_pdf: ""
url_slides: ""
url_video: ""

# Slides (optional).
#   Associate this project with Markdown slides.
#   Simply enter your slide deck's filename without extension.
#   E.g. `slides = "example-slides"` references `content/slides/example-slides.md`.
#   Otherwise, set `slides = ""`.
slides: ""
---
<div style="text-align: justify">

# Definici√≥n de probabilidad

Como vimos en el post de [Explorando Probabilidades](https://www.dmorialva.com/post/explorando-informacion/), la probabilidad se define como la cuantificaci√≥n de la ocurrencia de un evento en un experimento. Para ello, debemos conocer el **espacio muestral**, que es el conjunto de todos los posibles resultados. Empecemos con el lanzamiento de una moneda. En este experimento, el espacio muestral es de Cara (c) o Sello (s). 

```{r}
# Lanzamiento de una moneda
sample(x=c("c","s"), size = 1)
# La probabilidad de este evento es 1/2
```

Creo que nos hes f√°cil entender, que un lanzamiento no influye en el resultado del siguiente, esta caracteristica hace que los eventos sea independientes. 

Vamos hacer el siguiente experimento: lanzaremos una moneda 100 veces, y comprobaremos las probabilidades. ¬øEsperas tener 50 caras y 50 sellos exactamente?
```{r, message=FALSE, echo=FALSE}
library(tidyverse)
library(ggplot2)
library(gganimate)
library(reshape2)
# Cara = 1, Sello = 0
lanzamiento <- lapply(1:100, function(x){sample(c(1,0), size = 1, prob=c(0.5,0.5))})
lanzamiento <- as.data.frame(Reduce(rbind, lanzamiento))
colnames(lanzamiento) <- c("c")
lanzamiento <- lanzamiento %>% mutate(s=1-c)
lanzamiento <- lanzamiento %>% mutate(c = cumsum(c), s = cumsum(s))
lanzamiento <- melt(lanzamiento)
lanzamiento <- lanzamiento %>% mutate(index = rep(1:100,2))

graph <- lanzamiento %>% ggplot(aes(x = variable, y = value, fill = variable)) +              geom_bar(stat = "identity", color = "white", show.legend = FALSE, width = 0.2) +
     geom_text(aes(label = as.numeric(value)),position = position_dodge(0.9),
      vjust= 1.2, size = 5, color = "white")  +
      labs(x = "Moneda", y = "Frecuencia")+
      theme_minimal(base_size = 18) +
      enter_appear() +
      transition_states(index,transition_length = 1.5,state_length = 2) +
      labs(title = " Lanzamiento \n n√∫mero : {closest_state}")
  
animate(graph, fps = 20, width = 750, height = 450, duration = 10 )

```

Como es de esperar, no obtenemos 50 caras y 50 sellos. Si repitieramos este experimento, podemos tener muchas combinaciones posibles, por ejemplo P(c) = 0.2 y P(s) = 0.8
Es decir, si en un lanzamieno obtenemos cara, no es de esperar que en siguiente sea sello, ya que los eventos son independientes. Vamos a ejecutar 1000 veces este experimento y graficar los histogramas.

```{r, echo=FALSE}
set.seed(1112)
moneda <- c('C', 'S')
trials <- 10
distribution <- c(.5, .5)
experiment <- lapply(1:1000, function(x) {
  sample(x = moneda,
         size = trials,
         replace = T,
         prob = distribution)
  
})

experiment <- Reduce(rbind, experiment)
probability <- sapply(apply(experiment, 1, table), prop.table, simplify = "array")
probability <- as.data.frame(purrr::reduce(probability, rbind), 
                              stringsAsFactors = F)

pC <- as.data.frame(table(probability$C),stringsAsFactors = F)
pC$Resultado <- 'C'
pS <- as.data.frame(table(probability$S), 
                    stringsAsFactors = F)
pS$Resultado <- 'S'
probabilityDistribution <- rbind(pC, pS)
colnames(probabilityDistribution) <- c('Estimate', 'Frecuencia', 'Resultado')

ggplot(probabilityDistribution, 
       aes(x = Estimate, y = Frecuencia, 
           color = Resultado, 
           fill = Resultado)) + 
  geom_bar(stat = "identity") + 
  scale_color_manual(values = c('cadetblue4', 'cadetblue2')) +
  scale_fill_manual(values = c('cadetblue4', 'cadetblue2')) + 
  facet_wrap(~Resultado) + 
  theme_bw() + 
  theme(panel.border = element_blank()) + 
  theme(strip.background = element_blank()) + 
  theme(legend.position = "none")

```

Como vemos, el resultado no siempre es tener 50/50, es posible tener 10/90 o 70/30, pero entonces ¬øNo era una moneda justa?. ¬øPor qu√© no obtenemos siempre 50/50?. La respuesta es que nosotros esperamos que el evento de 50/50 sea el mas probable y cuya esperanza sea en el infinito de 0.5. Para estas 1000 simulaciones observamos qu√© el valor m√°s probable:

```{r}

probabilityDistribution %>% 
  select(Estimate, Frecuencia, Resultado) %>% 
  group_by(Resultado) %>% 
  summarise(mode = Estimate[which.max(Frecuencia)])
```

Exactamente, es el escenario donde se da el 50/50, el mas probable (mayor frecuencia). ¬øY cu√°l es la medida promedio?

```{r}
probabilityDistribution %>% 
  select(Estimate, Frecuencia, Resultado) %>% 
  group_by(Resultado) %>% 
  summarise(mean = sum(as.numeric(Estimate)*Frecuencia)/sum(Frecuencia))

```

Conforme sigamos lanzando la moneda, la probabilidad que resulte cara en el infinito debe ser 0.5, por la definicion de [convergencia en probabilidad](https://es.wikipedia.org/wiki/Convergencia_en_probabilidad). Esto tambien se podria demostrar mediante inferencia estadistica, por ejemplo por una prueba de hip√≥tesis, en el cual se quiere probar que el par√°metro de inter√©s resulte ser estad√≠sticamente significativo a partir de una muestra. 



<div/>

### Te parece √∫til? Considera compartirlo üôå
