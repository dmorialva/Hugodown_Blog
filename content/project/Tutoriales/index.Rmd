---
output: hugodown::md_document
title: "Tengo datos. 驴Y ahora qu茅?"
subtitle: "Carga de datos - I"
summary: Como importar datos a R de distintas fuentes.
date: '2021-09-18'
tags:
- Data Science
- Manejo Datos
- R
external_link: ''
image:
  caption: ''
  focal_point: Smart
  placement: 1
links:
- icon: linkedin
  icon_pack: fab
  name: Follow
  url: https://www.linkedin.com/in/morialva27/
url_code: ''
url_pdf: ''
url_slides: ''
url_video: ''
slides: []
---
<div style="text-align: justify">
Esta es una serie de post, que nos ayudar谩 a ver de manera aplicada los conceptos de estad铆stica y de machine learning. Para comenzar, lo primero es conseguir informaci贸n.
Asumiendo que ya tenemos esto, el siguiente paso es ahora poder gestionarla dentro de R. 

Podemos tener informaci贸n en distintos formatos, desde un texto plano, separado por comas, excel, XML, base de datos, json, etc. Nos ayudaremos de datos abiertos de [kaggle](https://www.kaggle.com) y de [openml](https://www.openml.org/).

# Leer informaci贸n desde web (CSV)

El dataset "airlines" se compone por la informaci贸n de los vuelos en Estados Unidos del 2003 al 2016.

```{r}

airline <- read.csv('https://corgis-edu.github.io/corgis/datasets/csv/airlines/airlines.csv')

head(airline)[,c(1:5)]

```
Se us贸 la funcion read.csv, ya que la informacion se encuentra separada por comas. Si la informacion estuviera separa por otro caracter, se agregaria el parametro *sep = "/"* por ejemplo.
No es indispensable que el formato almacenado en la web sea un CSV, tambien puede ser un texto plano (.TXT) u otro.

# Leer informaci贸n desde disco local (Zip file)

Para esto, primero descargar el archivo del siguiente [link](https://www.kaggle.com/mokar2001/house-price-tehran-iran). Se descargar谩 un zip y dentro de el un archivo csv. 

```{r}

house <- read.csv(unz("archive.zip","housePrice.csv"), header = T)

head(house)

```

Para que funcione el c贸digo de arriba, es necesario saber el nombre del archivo que se encuentra dentro del zip, en este caso es "housePrice.csv"

# Leer informaci贸n desde disco local (Excel file)

Cuando tenemos un archivo en formato excel, debemos ser cuidadosos en ver si la extensi贸n es ".xls" o ".xlsx". A partir de la extensi贸n tendremos que escoger qu茅 libreria usar. Por otra parte, a diferencia de un texto plano, o un csv, el formato de excel como sabemos esta organizado por pesta帽as, es decir un archivo podria tener informaci贸n en m谩s de una pesta帽a. Para el siguiente ejemplo, por favor descargue el siguiente [archivo](https://www.kaggle.com/akouaorsot/fintech-stock-price-data) y descompr铆malo en su disco local.


```{r}
library(openxlsx)
paypal <- read.xlsx("Fintech Stocks.xlsx", sheet = "PayPal")
coinbase <- read.xlsx("Fintech Stocks.xlsx", sheet = "Coinbase")

head(paypal,5)

head(coinbase,5)

```

# Leer informaci贸n de una base de datos externa (online)

Con *R* podemos conectarnos a distintos gestores de base datos (MS Accsess, SQL, MySQL, Oracle, etc), por medio de la ODBC [(Open DataBase Connectivity)](https://es.wikipedia.org/wiki/Open_Database_Connectivity). Para ello se cuentan con distintos paquetes, entre ellos DBI, ODBC, etc. Si nuestra informaci贸n se encuentra en una base SQL cuyo servidor f铆sico se encuentra en tu centro laboral, o ubicado fuera de tu red local, podemos conectarnos a ella conociendo la IP, el usuario y contrase帽a y asegurar que tengas un perfil de acceso.

```{r, eval=FALSE, error=FALSE}
library(DBI)
library(odbc)

conn <- dbConnect(odbc::odbc(), Driver = "SQL Server",
Server = "161.132.193.XXX",
Database = "Nombre_Base",
UID = "usuario",
PWD = "usuario",
encoding = "latin1")

```

Creamos un objeto de tipo Conexi贸n llamado "conn". Para esto debes conocer si el gestor es un SQL Server, MySQL, etc. En el campo "Server", tienes que ingresar la IP del servidor. En "UID" el nombre del usuario de tu perfil de acceso y en "PWD" el password. El tipo de "encoding" ayuda con los caracteres especiales, como la 帽.

```{r, eval=FALSE, error=FALSE}
consulta <- dbGetQuery(conn, "SELECT * FROM TABLA")
```

Una vez que se estableci贸 con 茅xito la conexi贸n, se podr谩n hacer extracciones y filtros de la informaci贸n con las sentencias **SELECT** por medio de la funci贸n "dbGetQuery" cuyo par谩metro ser谩 la conexi贸n que hicimos anteriormente.
<div/>

### Te parece 煤til? Considera compartirlo 
